<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<script src="http://code.jquery.com/jquery-1.10.0.js"></script>
<script src="http://dygraphs.com/1.0.1/dygraph-combined.js"></script>
<script>
function validateEmail(email) 
{
    var re = /\S+@\S+/;
    return re.test(email);
}

$(function(){
	$("#submit").click(function(){
		if(!validateEmail($("#email").val()))
		{
			$("#fill").text("Please enter a valid email!");
		}
		else
		{
			$.post("sendparams",{"probedata":$("#probedata").text(),"params":$("#params").val(),"low_env":$("#h_low").text(),"high_env":$("#h_high").text(),"email":$("#email").val()})
			.done(function(data)
			{
				$("#fill").text("Successfully submitted! You have id "+data+" and your data will be emailed to "+$("#email").val());
			});
		}
	});
});

</script>
</head>
<body>
Params:
<br/>
Note that Mem_cond below goes from 0.3 to 120 with 10 points and logarithmically(1) not linearly(0).
<br/>
Use such a format for other continuous values.
<br/><textarea id="params" cols=40 rows=20>
Neher,1e+08
Deform,10000
Nsteps,1
CStray,4e-12
RStray,3e+11
Cwholecell,2e-10
Rwholecell,1e+08
Length,2e-06
Dia,3.18e-07
CPE_alpha,0.5
CPE_k,0.0003
R_pene,1e+15
Mem_cond,0.3,120,10,1
Rbath,200
compartments,8
</textarea><br/>
Email:<br/>
<input id="email" type="text"></input>
<br/>
Probe Data: <br/>
<textarea id="probedata" cols=100 rows=2>
[[0.0, 1e-7, 0.5, 0.0003, 100000000.0], [3.7499999999999998e-08, 1.8998355191963336e-07, 0.5, 0.0003, 100000000.0], [7.4999999999999997e-08, 2.6339134382131854e-07, 0.5, 0.0003, 100000000.0], [1.1249999999999999e-07, 3.1598061649411345e-07, 0.5, 0.0003, 100000000.0], [1.4999999999999999e-07, 3.5707142142714254e-07, 0.5, 0.0003, 100000000.0], [1.875e-07, 3.903123748998999e-07, 0.5, 0.0003, 100000000.0], [2.2499999999999999e-07, 4.1758232721225167e-07, 0.5, 0.0003, 100000000.0], [2.6249999999999997e-07, 4.39992897669951e-07, 0.5, 0.0003, 100000000.0], [2.9999999999999999e-07, 4.58257569495584e-07, 0.5, 0.0003, 100000000.0], [3.375e-07, 4.7285700798444346e-07, 0.5, 0.0003, 100000000.0], [3.7500000000000001e-07, 4.841229182759271e-07, 0.5, 0.0003, 100000000.0], [4.1249999999999997e-07, 4.922842166878804e-07, 0.5, 0.0003, 100000000.0], [4.4999999999999998e-07, 4.9749371855331e-07, 0.5, 0.0003, 100000000.0], [4.8749999999999999e-07, 4.998437255783051e-07, 0.5, 0.0003, 100000000.0], [5.2499999999999995e-07, 4.993746088859545e-07, 0.5, 0.0003, 100000000.0], [5.6250000000000001e-07, 4.960783708246107e-07, 0.5, 0.0003, 100000000.0], [5.9999999999999997e-07, 4.898979485566356e-07, 0.5, 0.0003, 100000000.0], [6.3749999999999993e-07, 4.807221130757353e-07, 0.5, 0.0003, 100000000.0], [6.75e-07, 4.6837484987987984e-07, 0.5, 0.0003, 100000000.0], [7.1249999999999995e-07, 4.525966747557918e-07, 0.5, 0.0003, 100000000.0], [7.5000000000000002e-07, 4.330127018922193e-07, 0.5, 0.0003, 100000000.0], [7.8749999999999998e-07, 4.090767042988393e-07, 0.5, 0.0003, 100000000.0], [8.2499999999999994e-07, 3.799671038392666e-07, 0.5, 0.0003, 100000000.0], [8.625e-07, 3.4437443284889773e-07, 0.5, 0.0003, 100000000.0], [8.9999999999999996e-07, 3.0000000000000004e-07, 0.5, 0.0003, 100000000.0], [8.9999999999999996e-07, 3e-07, 0.4, 0.0003, 100000000.0], [9.4583333333333331e-07, 3e-07, 0.4, 0.0003, 100000000.0], [9.9166666666666656e-07, 3e-07, 0.4, 0.0003, 100000000.0], [1.0375e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.0833333333333333e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.1291666666666667e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.175e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.2208333333333332e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.2666666666666667e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.3124999999999999e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.3583333333333332e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.4041666666666666e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.4500000000000001e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.4958333333333333e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.5416666666666666e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.5875e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.6333333333333333e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.6791666666666665e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.725e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.7708333333333332e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.8166666666666665e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.8625e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.9083333333333334e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.9541666666666665e-06, 3e-07, 0.4, 0.0003, 100000000.0], [1.9999999999999999e-06, 3e-07, 0.4, 0.0003, 100000000.0]]
</textarea>
<br/>Env region from <textarea id="h_low" type="number" cols=10 rows=1 style="height:10px;">0.5e-6</textarea> to <textarea id="h_high" type="number" cols=10 rows=1 style="height:10px;">1.7e-6</textarea>.
<br/><button id="update">Update Graph Below (for visualization only)</button>
<br/><br/><button id="submit">Submit!</button>

<div id="demodiv"></div>
<div id="fill"></div>
<script>
var data = eval($("#probedata").text());
var data2 = [];
for (var i=0; i < data.length; i++)
{
	data2.push([data[i][0],data[i][1]]);
}
g = new Dygraph(
	document.getElementById("demodiv"),
	data2,
	{
		labels: ["Distance from tip", "Probe Radius"],
		xlabel: "Distance from tip",
		interactionModel: {},
		underlayCallback: function(canvas, area, g) {
			var bottom_left = g.toDomCoords(parseFloat($("#h_low").text()), -20);
			var top_right = g.toDomCoords(parseFloat($("#h_high").text()), +20);
			
			var left = bottom_left[0];
			var right = top_right[0];
			
			canvas.fillStyle = "rgba(255, 255, 102, 1.0)";
			canvas.fillRect(left, area.y, right - left, area.h);
		}
});
</script>
</body>

</html>